generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum rol {
  Tramitador
  Admin
  Propietario
}

model Usuario {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String

  Rol            Role[]
  Propietario    Propietario? @relation(fields: [Propietario_ID], references: [id])
  Propietario_ID Int?
  Tramitador     Tramitador?  @relation(fields: [Tramitador_ID], references: [id])
  Tramitador_ID  Int?
  Radicado       Radicado[]
}

model Role {
  id   Int    @id @default(autoincrement())
  tipo String

  Usuario Usuario[]
}

model Tramitador {
  id         Int    @id @default(autoincrement())
  nombres    String
  apellidos  String
  tipo_doc   String
  numero_doc String @unique
  email      String @unique
  telefono   String
  ciudad     String

  Usuario  Usuario?
  Radicado Radicado[]

}

model Propietario {
  id          Int     @id @default(autoincrement())
  nombres     String
  apellidos   String
  tipo_doc    String
  numero_doc  String  @unique
  email       String  @unique
  telefono    String
  ciudad      String
  es_Juridica Boolean

  Usuario  Usuario?
  Predios  Predio[]
  Radicado Radicado[]
}

model Predio {
  id                 Int     @id @default(autoincrement())
  codigoCatrastal    String  @unique
  matricula          String? @unique
  via                String
  nro                String
  apen               String
  cruce              String
  nro2               String  @default("")
  apen2              String  @default("")
  placa              String?
  apartamento        String?
  urb_edif           String
  estrato            String
  barrio             String
  comuna             String
  clasificacionSuelo String
  uso                String
  poligono           String
  zonaAvaluo         String

  Propietarios Propietario[]
  Radicados    Radicado[]
}

model TipoSolicitud {
  id                  Int    @id @default(autoincrement())
  licencia            String
  tipo_licencia       String
  objetivo_tramite    String
  area_contruicda     String
  sistema_estructural String
  detalles_solitud    String

  Radicado      Radicado?  @relation(fields: [Radicado_ID], references: [id])
  Radicado_ID   Int?
  Ponderate     Ponderante @relation(fields: [Ponderante_ID], references: [id])
  Ponderante_ID Int
}

model Ponderante {
  id     Int    @id @default(autoincrement())
  nombre String

  Tipo_Solicitud TipoSolicitud?
}

model Radicado {
  id            Int    @id @default(autoincrement())
  nro_radicado  String @unique
  cargo_fijo    Int
  cargo_varible Int?

  Usuario        Usuario?        @relation(fields: [usuario_ID], references: [id])
  usuario_ID     Int?
  Tramitador     Tramitador?     @relation(fields: [Tramitador_ID], references: [id])
  Tramitador_ID  Int?
  Propietario    Propietario?    @relation(fields: [Propietario_ID], references: [id])
  Propietario_ID Int?
  Predio         Predio?         @relation(fields: [Predio_ID], references: [id])
  Predio_ID      Int?
  Tipo_Solicitud TipoSolicitud[]
}
